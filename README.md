# calorie-counter

## 개요

* 본 프로젝트에서는 식단영양정보 서비스를 제공하는 시스템을 개발합니다.
* fatsecret 서비스는 기본적으로 사용자가 섭취한 음식을 입력하면 음식의 영양정보를 제공하는 서비스이며, 사용자들은 건강한 식단관리를 할 수있다는 장점이 있습니다.
* 서비스는 일반 이용자, 제공자, 관리자가 사용할 수 있습니다.

1. 일반 User: 일반회원이며 회원가입 후 서비스를 이용할 수 있다.
2. Provider: 식품에대한 세부 영양정보를 제공하는 전문가이며 서비스 관리자가 지정한다. 일반 이용자와 분리되는 별도의 가입절차를 거친다. 식단 정보를 신규 등록하고 삭제할 수 있다. 또한, 다른 Provider의 식단 정보 내용을 등록 심사할 수 있다.
3. Admin은 Provider의 가입 심사 제출서류를 확인하고, 가입 심사를 승인하거나 거절할 수 있다. 또한, 일반 사용자(User)와 Provider에 대한 약관 위반자를 강제 탈퇴할 수 있다. 식단정보가 부적절한 경우에 한하여 삭제할 수 있다.

## 기술 스택

* JDK 17
* Spring Boot 2.7.4
* MyBatis 3
* MySQL 8.0 
* Gradle
* IntelliJ 

## 기능 구조도

<html>
<body>
<!--StartFragment-->

| 사용자     | 메뉴1               | 메뉴2                                            | 기능               | 우선 순위 | 담당자 |
| ---------- | ------------------- | ------------------------------------------------ | ------------------ | --------- | ------ |
| 일반이용자 | 회원                | GUEST 회원가입                                   | ID 중복확인        | 4         | 이영진 |
|            |                     |                                                  | 비밀번호 검증      | 5         | 이영진 |
|            |                     |                                                  | 인증번호 생성      | 5         | 이영진 |
|            |                     | 인증번호 발송                                    | 7                  | 이영진    |        |
|            |                     | 인증번호 검증                                    | 8                  | 이영진    |        |
|            |                     | 회원가입                                         | 1                  | 이영진    |        |
|            | 마이페이지          | 회원정보 변경                                    | 9                  | 이영진    |        |
|            |                     | 비밀번호 변경                                    | 10                 | 이영진    |        |
|            |                     | 회원 탈퇴 신청                                   | 11                 | 이영진    |        |
| 다이어리   | 식품 검색           | 식품 검색                                        | 21                 | 이영진    |        |
|            | 식품 추가           | 식품 추가                                        | 17                 | 이영진    |        |
|            | 식품 상세           | 식품 상세 조회                                   | 18                 | 이영진    |        |
|            | 식품 목록           | 최근 먹은음식 조회                               | 22                 | 이영진    |        |
|            |                     | 자주 먹은음식 조회                               | 23                 | 이영진    |        |
|            |                     | 입력 식품 조회                                   | 24                 | 이영진    |        |
|            | 식품선택            | 식품섭취량 입력                                  | 27                 | 이영진    |        |
|            |                     | 식품 체크                                        | 28                 | 이영진    |        |
|            | 식품수정            | 식품 상세정보 수정                               | 29                 | 이영진    |        |
|            | 식품삭제            | 식품 삭제                                        | 30                 | 이영진    |        |
| 홈         | 피드                | 피드 조회                                        | 33                 | 이영진    |        |
|            |                     | 피드 댓글 조회                                   | 34                 | 이영진    |        |
|            |                     | 피드 좋아요                                      | 35                 | 이영진    |        |
|            |                     | 피드 댓글 작성                                   | 36                 | 이영진    |        |
|            |                     | 피드 댓글 수정                                   | 37                 | 이영진    |        |
|            |                     | 피드 댓글 삭제                                   | 38                 | 이영진    |        |
|            |                     | 피드 대댓글 작성                                 | 39                 | 이영진    |        |
|            |                     | 피드 대댓글 수정                                 | 40                 | 이영진    |        |
|            |                     | 피드 대댓글 삭제                                 | 41                 | 이영진    |        |
|            |                     | 피드 사진 업로드                                 | 41                 | 이영진    |        |
|            |                     | 피드 게시글 공유                                 | 41                 | 이영진    |        |
| 제공자     | 회원                | 회원가입                                         | ID 중복확인        | 4         | 박진형 |
|            |                     | 비밀번호 검증                                    | 5                  | 박진형    |        |
|            |                     | SMS 인증번호 생성                                | 6                  | 박진형    |        |
|            |                     | SMS 인증번호 발송                                | 7                  | 박진형    |        |
|            |                     | SMS 인증번호 검증                                | 8                  | 박진형    |        |
|            |                     | 비밀번호 암호화                                  | 2                  | 박진형    |        |
|            |                     | DB 회원정보 등록                                 | 14                 | 박진형    |        |
|            |                     | 가입 심사파일 업로드                             | 6                  | 박진형    |        |
|            | 회원정보 변경       | 필드값 변경                                      | 9                  | 박진형    |        |
|            | 아이디 변경         | 아이디 조건 검증                                 | 10                 | 박진형    |        |
|            |                     | DB 아이디 변경                                   | 10                 | 박진형    |        |
|            | 비밀번호 변경       | 비밀번호 조건 검증                               | 10                 | 박진형    |        |
|            |                     | 비밀번호 암호화                                  | 10                 | 박진형    |        |
|            |                     | DB 비밀번호 변경                                 | 10                 | 박진형    |        |
|            | 회원 탈퇴           | 회원 탈퇴 신청                                   | 11                 | 박진형    |        |
|            |                     | 회원 탈퇴 승인                                   | 12                 | 박진형    |        |
|            |                     | DB 회원정보 삭제                                 | 13                 | 박진형    |        |
|            | 전문 분야 추가 신청 | 전문 분야 추가 신청                              | 14                 | 박진형    |        |
|            | 가입 상태 조회      | 심사 상태 조회                                   | 11                 | 박진형    |        |
|            |                     | 심사 정보 변경                                   | 12                 | 박진형    |        |
|            |                     | 심사 요청 취소                                   | 13                 | 박진형    |        |
|            |                     | 심사 상태 변경 알림                              | 13                 | 박진형    |        |
|            | 전문 분야 추가 신청 | 전문 분야 추가 신청                              | 14                 | 박진형    |        |
| 식단정보   | 신규 식단정보 등록  | 필드값 등록(이름,카테고리, 영양 정보, 상세 설명) | 42                 | 박진형    |        |
|            |                     | 사진 서버 사진 등록                              | 43                 | 박진형    |        |
|            |                     | 식단 정보 승인 요청                              | 44                 | 박진형    |        |
|            | 예비 식단정보 상태  | 정보 승인 상태 조회                              | 17                 | 박진형    |        |
|            |                     | 식단 정보 변경                                   | 18                 | 박진형    |        |
|            |                     | 승인 상태 변경 알림                              | 19                 | 박진형    |        |
|            |                     |                                                  | 심사 요청 취소     | 19        | 박진형 |
|            | 신규 영양성분 등록  | 이름 등록                                        | 19                 | 박진형    |        |
|            |                     |                                                  | 상세 설명 등록     | 19        | 박진형 |
|            | 예비 식단정보 검증  | 예비 식단정보 조회                               | 17                 | 박진형    |        |
|            |                     | 해당 식단심사 승인                               | 18                 | 박진형    |        |
|            |                     | 해당 식단심사 거절                               | 19                 | 박진형    |        |
|            |                     |                                                  | 해당 식단심사 보류 | 19        | 박진형 |
|            |                     | 기존 식단정보 삭제                               | 기존 식단정보 삭제 | 19        | 박진형 |

<!--EndFragment-->
</body>
</html>

## 일반 사용자 다이어리 기능 명세

### USE CASE - 식품 추가

1. 유저가 로그인한다.
2. 다이어리 탭을 클릭한다
3. 입력한 식단목록이 조회된다.
4. 아침/점심/저녁/간식에 음식을 추가한다.
   - 4-1. 검색하여 추가한다.
     - 4-1-1. 음식을 입력후 검색한다 .
     - 4-1-2. 해당 키워드를 포함한 음식목록이 보여진다.
     - 4-1-3. 5번 흐름으로 이동한다.
   - 4-2. 최근에 먹은음식 목록에서 추가한다.
     - 4-2-1. 최근에 먹은음식 탭을 선택한다.
     - 4-2-2. 최근에 입력했던 음식목록이 보여진다.
     - 4-2-3. 5번 흐름으로 이동한다.
   - 4-3. 자주 먹은음식 목록에서 추가한다.
     - 4-3-1. 자주 먹은음식 탭을 선택한다.
     - 4-3-2. 자주 입력되었던 음식목록이 보여진다.
     - 4-3-3. 5번 흐름으로 이동한다.
5. 추가하고싶은 음식들을 선택한다.
   - 5-1. 음식 상세 정보를 조회한다
     - 5-1-1. 제공자에 의해 제공되는 정보중 수량(g, 개수, kg, 인분, 온스 등), 용량 등을 선택하여 저장한다.
6. 총 섭취 칼로리,영양분이 보여진다

### USE CASE - 식품 관리

1. 유저가 로그인한다.
2. 다이어리 탭을 클릭한다
3. 입력한 식단목록이 조회된다.
4. 아침/점심/저녁/간식에 있는 음식목록을 조회한다.
   - 4-1. 식품 상세목록을 삭제한다.
   - 4-2. 식품 상세목록을 수정한다.
     - 4-2-1. 제공자에 의해 제공되는 정보중 수량(g, 개수, kg, 인분, 온스 등), 용량 등을 선택하여 저장한다.
5. 총 섭취 칼로리,영양분이 보여진다

## 제공자 기능 명세

### USE CASE 1 - 회원가입 기능

1. 로그인 화면에서 `제공자로 가입`을 선택한다.
2. 제공자 용 회원가입 폼이 보여진다.
3. 아이디를 입력 후 중복확인 버튼을 클릭한다.

* 3-1. 존재하는 아이디가 있으면 중복 아이디 존재 메세지를 응답한다.
* 3-2. 존재하는 아이디가 없으면 사용 가능 메세지를 응답한다.

4. 비밀번호와 검증 비밀번호를 입력한다.
5. 전화번호를 입력 후 인증번호 발송 버튼을 클릭한다.
6. 유저는 3분 내에 수신한 인증번호를 입력하고 인증하기 버튼을 클릭한다.
7. 유저의 생년월일을 입력한다.
8. 영양 정보를 제공할 식단 카테고리(한식, 중식, 양식 등..) 중 하나를 선택한다.
9. 해당 분야의 전문가임을 입증할 수 있는 서류를 첨부한다.
10. 회원가입 버튼을 클릭하면 HOST 회원가입을 완료한다.
11. 로그인 화면으로 이동한다.
12. 관리자가 승인하면 제공자로서의 회원가입이 완료되었다는 이메일을 발송받는다.
13. 이메일을 클릭하여 회원가입을 확정한다.

#### 플로우 차트

![Provider 플로우차트 drawio](https://user-images.githubusercontent.com/113809660/196572365-c7624cf4-b637-43db-83e7-c039a9628e26.png)

### USE CASE 2 - 영양정보 제공 기능

1. 로그인 화면에서 `제공자 로그인` 탭을 눌러 제공자로서 로그인을 한다.
2. 식단 탭을 클릭한다.
3. 식단 탭에서 `새로운 메뉴 정보 제공하기` 버튼을 클릭한다.
4. `새로운 메뉴 정보 제공하기` 버튼을 누르면 식단 정보를 입력할 수 있는 폼이 나타난다.
5. 식단 정보를 입력할 수 있는 폼에서는 다음의 정보를 입력할 수 있다.

 * 식단 이름
 * 식단 사진 (3개 이상)
 * 식단 상세 정보
 * 식단 카테고리 (한식인지, 중식인지, 일식인지 등등)
   * 만약 기존에 존재하지 않는 카테고리라면, 새롭게 추가할 수 있다. 카테고리 추가는 별도의 다른 제공자의 허가를 필요로 하지 않는다.
 * 식단 영양정보 (Key-Value)
   * 칼로리
   * 열량 (탄수화물)
   * 단백질
   * 지방 (포화지방 및 트랜스지방 포함)
   * 당류
   * 나트륨
   * 칼슘
   * 철
   * 위에 존재하지 않는 기타 세부 영양 데이터를 추가할 수 있다. 세부 영양 데이터 추가는 별도의 다른 제공자의 허가를 필요로 하지 않는다.

6. 확인 버튼을 눌러 위의 정보를 DB에 저장한다. 이는 `등록 대기 중` 상태가 된다.
7. 다른 제공자 `등록 대기 중` 상태인 새로운 영양 정보를 확인한 후, `정보에 오류가 없음` 버튼을 각각 누를 수 있다.
8. `정보에 오류가 없음` 버튼을 클릭한 다른 제공자가 3명이 될 경우 `등록됨` 상태가 된다.

  * `등록됨` 상태가 되면 일반 사용자가 해당 식단의 영양 정보를 확인할 수 있다.
